@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 214, 219, 220;
  --background-end-rgb: 255, 255, 255;
  --color-primary: #3b82f6;
  --color-primary-hover: #2563eb;
  --color-background: #0f172a;
  --color-foreground: #ffffff;
}

@media (prefers-color-scheme: dark) {
  :root {
    --foreground-rgb: 255, 255, 255;
    --background-start-rgb: 0, 0, 0;
    --background-end-rgb: 0, 0, 0;
  }
}

body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
      to bottom,
      transparent,
      rgb(var(--background-end-rgb))
    )
    rgb(var(--background-start-rgb));
  overflow-x: hidden; /* Prevent horizontal scroll on mobile */
}

/* Default sections with responsive heights */
section {
  min-height: 100vh;
  min-height: 100dvh;
  /* Dynamic viewport height for mobile */
  overflow: hidden;
  scroll-snap-align: start;
}

/* Safe area handling for devices with notches */
@supports (padding: max(0px)) {
  section {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}

/* Mobile adjustments */
@media (max-width: 768px) {
  section {
    min-height: 100vh;
    min-height: 100svh;
    /* Small viewport height for mobile */
    overflow: visible;
    /* Allow content to overflow on mobile if needed */
  }

  /* Reduce scroll snap on mobile for better UX */
  main {
    scroll-snap-type: none;
  }
  
  /* Improve touch targets on mobile */
  button, 
  a[role="button"],
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Prevent text selection issues on mobile */
  * {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
  /* Allow text selection for inputs, textareas, and content areas */
  input,
  textarea,
  [contenteditable],
  .selectable {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
  }
  
  /* Prevent zoom on input focus */
  input,
  textarea,
  select {
    font-size: 16px;
  }
  
  /* Smooth scrolling for mobile */
  html {
    scroll-behavior: smooth;
  }
  
  /* Better touch feedback */
  a, button {
    -webkit-tap-highlight-color: rgba(59, 130, 246, 0.1);
  }
  
  /* Reduce motion for better mobile performance */
  @media (max-width: 480px) {
    * {
      animation-duration: 0.5s !important;
      animation-delay: 0.1s !important;
      transition-duration: 0.3s !important;
    }
  }
}

/* Projects section without scroll snap interference and smooth scroll conflicts */
section#projects {
  scroll-snap-align: none;
  overflow: visible;
  scroll-behavior: auto; /* Prevent CSS smooth scroll conflicts with JS animations */
}

/* Apply scroll snap only to the main element on desktop */
@media (min-width: 769px) {
  main {
    scroll-snap-type: y mandatory;
  }
}

/* Custom scrollbar styles for horizontal scrolling */
.scrollbar-thin {
  scrollbar-width: thin;
}

.scrollbar-track-gray-800::-webkit-scrollbar-track {
  background-color: rgb(31 41 55);
  border-radius: 8px;
}

.scrollbar-thumb-gray-600::-webkit-scrollbar-thumb {
  background-color: rgb(75 85 99);
  border-radius: 8px;
}

.scrollbar-thumb-gray-600::-webkit-scrollbar-thumb:hover {
  background-color: rgb(107 114 128);
}

::-webkit-scrollbar {
  height: 8px;
  width: 8px;
}

/* Smooth transitions for section changes */
section {
  transition: all 0.3s ease-in-out;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

@keyframes aurora {
  from {
    background-position: 0% 50%;
  }

  to {
    background-position: 100% 50%;
  }
}

@layer utilities {
  .animate-aurora {
    background-size: 200% 200%;
    animation: aurora 10s linear infinite alternate;
  }
}

/* Blog Content Styles - Rich Text Editor Compatible */
.blog-content {
  @apply text-gray-300 leading-relaxed;
}

.blog-content h1,
.blog-content h2,
.blog-content h3,
.blog-content h4,
.blog-content h5,
.blog-content h6 {
  @apply text-white font-semibold mb-4 mt-8 first:mt-0;
}

.blog-content h1 {
  @apply text-4xl md:text-5xl;
}

.blog-content h2 {
  @apply text-3xl md:text-4xl border-b border-gray-700 pb-3;
}

.blog-content h3 {
  @apply text-2xl md:text-3xl;
}

.blog-content h4 {
  @apply text-xl md:text-2xl;
}

.blog-content h5 {
  @apply text-lg md:text-xl;
}

.blog-content h6 {
  @apply text-base md:text-lg;
}

.blog-content p {
  @apply mb-6 text-gray-300 leading-relaxed;
}

.blog-content ul,
.blog-content ol {
  @apply mb-6 pl-6 space-y-2;
}

.blog-content ul {
  @apply list-disc;
}

.blog-content ol {
  @apply list-decimal;
}

.blog-content li {
  @apply text-gray-300 leading-relaxed;
}

.blog-content blockquote {
  @apply border-l-4 border-blue-500 pl-6 py-4 my-6 bg-blue-500/5 rounded-r-lg italic text-blue-200;
}

.blog-content pre {
  @apply bg-gray-900 rounded-xl p-6 mb-6 overflow-x-auto border border-gray-700;
}

.blog-content code {
  @apply font-mono text-sm;
}

.blog-content pre code {
  @apply text-gray-300;
}

.blog-content :not(pre) > code {
  @apply bg-gray-800 text-blue-300 px-2 py-1 rounded text-sm;
}

.blog-content table {
  @apply w-full mb-6 border border-gray-700 rounded-lg overflow-hidden;
}

.blog-content th {
  @apply bg-gray-800 text-white font-semibold p-4 text-left border-b border-gray-700;
}

.blog-content td {
  @apply p-4 border-b border-gray-700 text-gray-300;
}

.blog-content tr:last-child td {
  @apply border-b-0;
}

.blog-content a {
  @apply text-blue-400 hover:text-blue-300 underline decoration-blue-400/50 underline-offset-4 transition-colors duration-300;
}

.blog-content img {
  @apply rounded-xl mb-6 shadow-2xl border border-gray-700;
}

.blog-content hr {
  @apply border-gray-700 my-8;
}

.blog-content strong {
  @apply text-white font-semibold;
}

.blog-content em {
  @apply text-blue-200 italic;
}

/* Rich Text Editor Compatibility */
.blog-content .ql-editor,
.blog-content .tox-edit-area,
.blog-content .DraftEditor-root,
.blog-content .ProseMirror {
  @apply text-gray-300 leading-relaxed;
}

/* Code highlighting for rich text editors */
.blog-content .hljs {
  @apply bg-gray-900 text-gray-300;
}

.blog-content .hljs-keyword {
  @apply text-blue-400;
}

.blog-content .hljs-string {
  @apply text-green-400;
}

.blog-content .hljs-comment {
  @apply text-gray-500 italic;
}

.blog-content .hljs-function {
  @apply text-yellow-400;
}

.blog-content .hljs-variable {
  @apply text-purple-400;
}

/* Responsive adjustments for blog content */
@media (max-width: 768px) {
  .blog-content h1 {
    @apply text-3xl;
  }
  
  .blog-content h2 {
    @apply text-2xl;
  }
  
  .blog-content h3 {
    @apply text-xl;
  }
  
  .blog-content pre {
    @apply p-4 text-sm;
  }
  
  .blog-content table {
    @apply text-sm;
  }
  
  .blog-content th,
  .blog-content td {
    @apply p-3;
  }
}

/* Button variants */
@layer components {
  .bg-primary {
    @apply bg-blue-600;
  }
  
  .text-primary-foreground {
    @apply text-white;
  }
  
  .hover\:bg-primary\/90:hover {
    @apply hover:bg-blue-700;
  }
  
  .hover\:bg-accent:hover {
    @apply hover:bg-gray-100;
  }
  
  .hover\:text-accent-foreground:hover {
    @apply hover:text-gray-900;
  }
}

/* Tiptap Editor Styles */
.ProseMirror {
  outline: none;
}

.ProseMirror h1 {
  @apply text-3xl font-bold mb-4 mt-6 first:mt-0;
}

.ProseMirror h2 {
  @apply text-2xl font-bold mb-3 mt-5;
}

.ProseMirror h3 {
  @apply text-xl font-bold mb-2 mt-4;
}

.ProseMirror p {
  @apply mb-3 leading-relaxed;
}

.ProseMirror ul {
  @apply list-disc list-inside mb-4 space-y-1;
}

.ProseMirror ol {
  @apply list-decimal list-inside mb-4 space-y-1;
}

.ProseMirror blockquote {
  @apply border-l-4 border-gray-300 pl-4 italic text-gray-700 mb-4;
}

.ProseMirror strong {
  @apply font-bold;
}

.ProseMirror em {
  @apply italic;
}

.ProseMirror a {
  @apply text-blue-600 hover:text-blue-800 underline;
}

.ProseMirror code {
  @apply bg-gray-100 text-gray-800 px-1 py-0.5 rounded text-sm font-mono;
}

.ProseMirror pre {
  @apply bg-gray-100 p-4 rounded-lg overflow-x-auto mb-4;
}

.ProseMirror pre code {
  @apply bg-transparent p-0;
}

/* Placeholder */
.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: #adb5bd;
  pointer-events: none;
  height: 0;
}